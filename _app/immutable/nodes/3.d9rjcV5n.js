import{s as fe,n as ne,o as he}from"../chunks/scheduler.SiZdlcgb.js";import{S as _e,i as ye,g as r,s as m,m as ge,h as c,j as x,y as b,c as v,f as A,n as be,k as l,l as Ae,A as V,a as Te,x as n}from"../chunks/index.ndoocLBO.js";function je(le){let s,o,g,H="Send «Hello, World!»",D,d,T="Send «Hello, World!» with inline webview button",e,t,a="Send current time to bot (x10)",i,u,oe="Expand Webview",R,C,ie="Hide Main Button",Q,S,z,E,J,W,re='<img id="peer_photo" class="chat_img svelte-15a0j6t" src=""/> <span id="peer_name"></span>',K,I,$,q,f,ce="bg_color",j,pe="secondary_bg_color",G,w,X,L,Y,B,h,de="bg_color",k,ue="secondary_bg_color",_,me="custom...",Z,M,ve=`<div id="btn_status" class="hint svelte-15a0j6t" style="display: none;"></div> <p class="svelte-15a0j6t">Test links:</p> <ul class="svelte-15a0j6t"><li class="svelte-15a0j6t"><a id="regular_link" href="" class="svelte-15a0j6t">Regular link #2</a> (opens inside webview)</li> <li class="svelte-15a0j6t"><a href="https://telegram.org/" target="_blank" class="svelte-15a0j6t">target=&quot;_blank&quot; link</a>
        (opens outside webview)</li> <li class="svelte-15a0j6t"><a href="javascript:window.open(&#39;https://telegram.org/&#39;);" class="svelte-15a0j6t">window.open() link</a> (opens outside webview)</li> <li class="svelte-15a0j6t"><a href="https://t.me/like" class="svelte-15a0j6t">LikeBot t.me link</a> (opens inside Telegram
        app)</li> <li class="svelte-15a0j6t"><a href="javascript:Telegram.WebApp.openTelegramLink(&#39;https://t.me/vote&#39;);" class="svelte-15a0j6t">web_app_open_tg_link()</a> (opens inside Telegram app)</li> <li class="svelte-15a0j6t"><a href="javascript:Telegram.WebApp.openLink(&#39;https://google.com/&#39;);" class="svelte-15a0j6t">web_app_open_link()</a> (opens outside webview)</li> <li class="svelte-15a0j6t"><a href="tg://resolve?domain=vote" class="svelte-15a0j6t">VoteBot tg:// link</a> (does not open)</li></ul> <p class="svelte-15a0j6t">Test permissions:</p> <ul class="svelte-15a0j6t"><li class="svelte-15a0j6t"><a href="javascript:;" onclick="return DemoApp.requestLocation(this);" class="svelte-15a0j6t">Request Location</a> <span></span></li> <li class="svelte-15a0j6t"><a href="javascript:;" onclick="return DemoApp.requestVideo(this);" class="svelte-15a0j6t">Request Video</a> <span></span></li> <li class="svelte-15a0j6t"><a href="javascript:;" onclick="return DemoApp.requestAudio(this);" class="svelte-15a0j6t">Request Audio</a> <span></span></li> <li class="svelte-15a0j6t"><a href="javascript:;" onclick="return DemoApp.requestAudioVideo(this);" class="svelte-15a0j6t">Request Audio+Video</a> <span></span></li> <li class="svelte-15a0j6t"><a href="javascript:;" onclick="return DemoApp.testClipboard(this);" id="clipboard_test" class="svelte-15a0j6t">Read from clipboard</a> <span></span></li></ul> <p class="svelte-15a0j6t">Test alerts:</p> <div class="columns svelte-15a0j6t"><ul class="svelte-15a0j6t"><li class="svelte-15a0j6t"><a href="javascript:;" onclick="alert(&#39;Hello!&#39;);" class="svelte-15a0j6t">alert</a></li> <li class="svelte-15a0j6t"><a href="javascript:;" onclick="confirm(&#39;Are you sure?&#39;);" class="svelte-15a0j6t">confirm</a></li> <li class="svelte-15a0j6t"><a href="javascript:;" onclick="prompt(&#39;How old are you?&#39;);" class="svelte-15a0j6t">prompt</a></li></ul> <ul class="svelte-15a0j6t"><li class="svelte-15a0j6t"><a href="javascript:;" onclick="DemoApp.showAlert(&#39;Hello!&#39;);" class="svelte-15a0j6t">showAlert</a></li> <li class="svelte-15a0j6t"><a href="javascript:;" onclick="DemoApp.showConfirm(&#39;Are you sure?&#39;);" class="svelte-15a0j6t">showConfirm</a></li> <li class="svelte-15a0j6t"><a href="javascript:;" onclick="DemoApp.requestWriteAccess();" class="svelte-15a0j6t">requestWriteAccess</a></li> <li class="svelte-15a0j6t"><a href="javascript:;" onclick="DemoApp.requestContact();" class="svelte-15a0j6t">requestContact</a></li> <li class="svelte-15a0j6t"><a href="javascript:;" onclick="DemoApp.showPopup();" class="svelte-15a0j6t">showPopup</a></li> <li class="svelte-15a0j6t"><a href="javascript:;" onclick="DemoApp.showScanQrPopup();" class="svelte-15a0j6t">showScanQrPopup</a></li> <li class="svelte-15a0j6t"><a href="javascript:;" onclick="DemoApp.showScanQrPopup(true);" class="svelte-15a0j6t">showScanQrPopup (links only)</a></li></ul></div> <p class="svelte-15a0j6t">Haptics:</p> <ul class="svelte-15a0j6t"><li class="svelte-15a0j6t">Impact: <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;heavy&#39;);" class="svelte-15a0j6t">heavy</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;light&#39;);" class="svelte-15a0j6t">light</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;medium&#39;);" class="svelte-15a0j6t">medium</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;rigid&#39;);" class="svelte-15a0j6t">rigid</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;soft&#39;);" class="svelte-15a0j6t">soft</a><br/><br/></li> <li class="svelte-15a0j6t">Notification: <a href="javascript:Telegram.WebApp.HapticFeedback.notificationOccurred(&#39;error&#39;);" class="svelte-15a0j6t">error</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.notificationOccurred(&#39;success&#39;);" class="svelte-15a0j6t">success</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.notificationOccurred(&#39;warning&#39;);" class="svelte-15a0j6t">warning</a><br/><br/></li> <li class="svelte-15a0j6t">Selection: <a href="javascript:Telegram.WebApp.HapticFeedback.selectionChanged();" class="svelte-15a0j6t">changed</a><br/><br/></li></ul> <pre class="svelte-15a0j6t"><code id="webview_data"></code></pre> <div class="hint svelte-15a0j6t">Data passed to webview.
      <span id="webview_data_status" class="status_need svelte-15a0j6t">Checking hash...</span></div> <pre class="svelte-15a0j6t"><code id="theme_data"></code></pre> <div class="hint svelte-15a0j6t">Theme params</div> <div class="hint svelte-15a0j6t">Version: <span id="ver"></span>, platform: <span id="platform"></span></div>`,ee,N,te,U;return{c(){s=r("div"),o=r("section"),g=r("button"),g.textContent=H,D=m(),d=r("button"),d.textContent=T,e=m(),t=r("button"),t.textContent=a,i=m(),u=r("button"),u.textContent=oe,R=m(),C=r("button"),C.textContent=ie,Q=m(),S=r("input"),z=m(),E=r("div"),J=m(),W=r("div"),W.innerHTML=re,K=m(),I=r("div"),$=ge("Header: "),q=r("select"),f=r("option"),f.textContent=ce,j=r("option"),j.textContent=pe,G=m(),w=r("div"),X=ge("Background: "),L=r("input"),Y=m(),B=r("select"),h=r("option"),h.textContent=de,k=r("option"),k.textContent=ue,_=r("option"),_.textContent=me,Z=m(),M=r("section"),M.innerHTML=ve,ee=m(),N=r("div"),te=m(),U=r("div"),this.h()},l(O){s=c(O,"DIV",{class:!0});var y=x(s);o=c(y,"SECTION",{id:!0,class:!0});var p=x(o);g=c(p,"BUTTON",{id:!0,onclick:!0,class:!0,"data-svelte-h":!0}),b(g)!=="svelte-1lcrk0"&&(g.textContent=H),D=v(p),d=c(p,"BUTTON",{id:!0,onclick:!0,class:!0,"data-svelte-h":!0}),b(d)!=="svelte-zutttf"&&(d.textContent=T),e=v(p),t=c(p,"BUTTON",{id:!0,onclick:!0,class:!0,"data-svelte-h":!0}),b(t)!=="svelte-125ccpw"&&(t.textContent=a),i=v(p),u=c(p,"BUTTON",{onclick:!0,class:!0,"data-svelte-h":!0}),b(u)!=="svelte-1qkzyz3"&&(u.textContent=oe),R=v(p),C=c(p,"BUTTON",{onclick:!0,class:!0,"data-svelte-h":!0}),b(C)!=="svelte-1qs826o"&&(C.textContent=ie),Q=v(p),S=c(p,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),z=v(p),E=c(p,"DIV",{class:!0,contenteditable:!0,"data-placeholder":!0,id:!0}),x(E).forEach(A),J=v(p),W=c(p,"DIV",{id:!0,style:!0,"data-svelte-h":!0}),b(W)!=="svelte-er9q7j"&&(W.innerHTML=re),K=v(p),I=c(p,"DIV",{class:!0});var ae=x(I);$=be(ae,"Header: "),q=c(ae,"SELECT",{id:!0});var se=x(q);f=c(se,"OPTION",{"data-svelte-h":!0}),b(f)!=="svelte-12yzkyt"&&(f.textContent=ce),j=c(se,"OPTION",{"data-svelte-h":!0}),b(j)!=="svelte-1x10bni"&&(j.textContent=pe),se.forEach(A),ae.forEach(A),G=v(p),w=c(p,"DIV",{class:!0});var P=x(w);X=be(P,"Background: "),L=c(P,"INPUT",{type:!0,id:!0}),Y=v(P),B=c(P,"SELECT",{id:!0});var F=x(B);h=c(F,"OPTION",{"data-svelte-h":!0}),b(h)!=="svelte-12yzkyt"&&(h.textContent=de),k=c(F,"OPTION",{"data-svelte-h":!0}),b(k)!=="svelte-1x10bni"&&(k.textContent=ue),_=c(F,"OPTION",{id:!0,"data-svelte-h":!0}),b(_)!=="svelte-z7gcmv"&&(_.textContent=me),F.forEach(A),P.forEach(A),p.forEach(A),Z=v(y),M=c(y,"SECTION",{class:!0,"data-svelte-h":!0}),b(M)!=="svelte-1217p0s"&&(M.innerHTML=ve),ee=v(y),N=c(y,"DIV",{class:!0}),x(N).forEach(A),te=v(y),U=c(y,"DIV",{class:!0}),x(U).forEach(A),y.forEach(A),this.h()},h(){l(g,"id","main_btn"),l(g,"onclick","DemoApp.sendMessage('');"),l(g,"class","svelte-15a0j6t"),l(d,"id","with_webview_btn"),l(d,"onclick","DemoApp.sendMessage('', true);"),l(d,"class","svelte-15a0j6t"),l(t,"id","data_btn"),l(t,"onclick","DemoApp.sendTime(true);"),l(t,"class","svelte-15a0j6t"),l(u,"onclick","DemoApp.expand();"),l(u,"class","svelte-15a0j6t"),l(C,"onclick","DemoApp.toggleMainButton(this);"),l(C,"class","svelte-15a0j6t"),l(S,"type","text"),l(S,"placeholder","Input text in regular input..."),l(S,"id","regular_field"),l(S,"class","svelte-15a0j6t"),l(E,"class","input svelte-15a0j6t"),l(E,"contenteditable","true"),l(E,"data-placeholder","Input text in contenteditable field..."),l(E,"id","text_field"),l(W,"id","peer_wrap"),Ae(W,"display","none"),f.__value="bg_color",V(f,f.__value),f.selected=!0,j.__value="secondary_bg_color",V(j,j.__value),l(q,"id","header_color_sel"),l(I,"class","sect_row svelte-15a0j6t"),l(L,"type","color"),l(L,"id","bg_color_input"),h.__value="bg_color",V(h,h.__value),h.selected=!0,k.__value="secondary_bg_color",V(k,k.__value),_.__value="custom",V(_,_.__value),l(_,"id","bg_color_val"),l(B,"id","bg_color_sel"),l(w,"class","sect_row svelte-15a0j6t"),l(o,"id","top_sect"),l(o,"class","second svelte-15a0j6t"),l(M,"class","svelte-15a0j6t"),l(N,"class","viewport-border svelte-15a0j6t"),l(U,"class","viewport-stable_border svelte-15a0j6t"),l(s,"class","container")},m(O,y){Te(O,s,y),n(s,o),n(o,g),n(o,D),n(o,d),n(o,e),n(o,t),n(o,i),n(o,u),n(o,R),n(o,C),n(o,Q),n(o,S),n(o,z),n(o,E),n(o,J),n(o,W),n(o,K),n(o,I),n(I,$),n(I,q),n(q,f),n(q,j),n(o,G),n(o,w),n(w,X),n(w,L),n(w,Y),n(w,B),n(B,h),n(B,k),n(B,_),n(s,Z),n(s,M),n(s,ee),n(s,N),n(s,te),n(s,U)},p:ne,i:ne,o:ne,d(O){O&&A(s)}}}function we(le){return he(()=>{const s={initData:Telegram.WebApp.initData||"",initDataUnsafe:Telegram.WebApp.initDataUnsafe||{},MainButton:Telegram.WebApp.MainButton,init(e){document.body.style.visibility="",Telegram.WebApp.ready(),Telegram.WebApp.MainButton.setParams({text:"CLOSE WEBVIEW",is_visible:!0}).onClick(s.close),Telegram.WebApp.BackButton.show(),Telegram.WebApp.BackButton.onClick(()=>navigation.back())},expand(){Telegram.WebApp.expand()},close(){Telegram.WebApp.close()},toggleMainButton(e){const t=Telegram.WebApp.MainButton;t.isVisible?(t.hide(),e.innerHTML="Show Main Button"):(t.show(),e.innerHTML="Hide Main Button")},sendMessage(e,t){if(!s.initDataUnsafe.query_id){alert("WebViewQueryId not defined");return}document.querySelectorAll("button").forEach(i=>i.disabled=!0);const a=document.querySelector("#btn_status");a.textContent="Sending...",s.apiRequest("sendMessage",{msg_id:e||"",with_webview:!s.initDataUnsafe.receiver&&t?1:0},function(i){document.querySelectorAll("button").forEach(u=>u.disabled=!1),i.response?i.response.ok?(a.textContent="Message sent successfully!",a.className="ok",a.style.display="block"):(a.textContent=i.response.description,a.className="err",a.style.display="block",alert(i.response.description)):i.error?(a.textContent=i.error,a.className="err",a.style.display="block",alert(i.error)):(a.textContent="Unknown error",a.className="err",a.style.display="block",alert("Unknown error"))})},changeMenuButton(e){document.querySelectorAll("button").forEach(a=>a.disabled=!0);const t=document.querySelector("#btn_status");t.textContent="Changing button...",s.apiRequest("changeMenuButton",{},function(a){document.querySelectorAll("button").forEach(i=>i.disabled=!1),a.response?a.response.ok?(t.textContent="Button changed!",t.className="ok",t.style.display="block",Telegram.WebApp.close()):(t.textContent=a.response.description,t.className="err",t.style.display="block",alert(a.response.description)):a.error?(t.textContent=a.error,t.className="err",t.style.display="block",alert(a.error)):(t.textContent="Unknown error",t.className="err",t.style.display="block",alert("Unknown error"))}),e&&setTimeout(function(){Telegram.WebApp.close()},50)},checkInitData(){const e=document.querySelector("#webview_data_status");s.initDataUnsafe.query_id&&s.initData&&e.classList.contains("status_need")&&(e.classList.remove("status_need"),s.apiRequest("checkInitData",{},function(t){t.ok?(e.textContent="Hash is correct (async)",e.className="ok"):(e.textContent=t.error+" (async)",e.className="err")}))},sendText(e){const t=document.querySelector("#text_field"),a=t.value;if(!a.length)return t.focus();if(o(a)>4096)return alert("Text is too long");const i=e?10:1;for(let u=0;u<i;u++)Telegram.WebApp.sendData(a)},sendTime(e){const t=e?10:1;for(let a=0;a<t;a++)Telegram.WebApp.sendData(new Date().toString())},showAlert(e){Telegram.WebApp.showAlert(e)},showConfirm(e){Telegram.WebApp.showConfirm(e)},requestWriteAccess(){Telegram.WebApp.requestWriteAccess(function(e){e?s.showAlert("Write access granted"):s.showAlert("Write access denied")})},requestContact(){Telegram.WebApp.requestContact(function(e){e?s.showAlert("Contact granted"):s.showAlert("Contact denied")})},isVersionAtLeast(e){return Telegram.WebApp.isVersionAtLeast(e)},doesntSupport(e){if(!this.isVersionAtLeast(e))throw Telegram.WebApp.showAlert("This feature is not supported in this version of Telegram",function(){Telegram.WebApp.close()}),new Error("This feature is not supported in this version of Telegram")},showPopup(){Telegram.WebApp.showPopup({title:"Popup title",message:"Popup message",buttons:[{id:"delete",type:"destructive",text:"Delete all"},{id:"faq",type:"default",text:"Open FAQ"},{type:"cancel"}]},function(e){e==="delete"?s.showAlert("'Delete all' selected"):e==="faq"&&Telegram.WebApp.openLink("https://telegram.org/faq")})},showScanQrPopup(e){Telegram.WebApp.showScanQrPopup({text:e?"with any link":"for test purposes"},function(t){if(e){const a=t.toString().toLowerCase();if(a.substring(0,7)==="http://"||a.substring(0,8)==="https://")return setTimeout(function(){Telegram.WebApp.openLink(t)},50),!0}else return s.showAlert(t),!0})},requestLocation(e){return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.nextElementSibling.innerHTML="("+t.coords.latitude+", "+t.coords.longitude+")",e.nextElementSibling.className="ok"}):(e.nextElementSibling.innerHTML="Geolocation is not supported in this browser.",e.nextElementSibling.className="err"),!1},requestVideo(e){return navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(t){e.nextElementSibling.innerHTML="(Access granted)"}):(e.nextElementSibling.innerHTML="Media devices is not supported in this browser.",e.nextElementSibling.className="err"),!1},requestAudio(e){return navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(t){e.nextElementSibling.innerHTML="(Access granted)",e.nextElementSibling.className="ok"}):(e.nextElementSibling.innerHTML="Media devices is not supported in this browser.",e.nextElementSibling.className="err"),!1},requestAudioVideo(e){return navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(t){e.nextElementSibling.innerHTML="(Access granted)",e.nextElementSibling.className="ok"}):(e.nextElementSibling.innerHTML="Media devices is not supported in this browser.",e.nextElementSibling.className="err"),!1},testClipboard(e){return!1},apiRequest(e,t,a){return a&&a({error:"This function ("+e+") should send requests to your backend. Please, change this code to your own."})}};function o(e){if(window.Blob)try{return new Blob([e]).size}catch{}let t=e.length;for(let a=e.length-1;a>=0;a--){const i=e.charCodeAt(a);i>127&&i<=2047?t++:i>2047&&i<=65535&&(t+=2),i>=56320&&i<=57343&&a--}return t}function g(e,t){const a=Math.pow(10,t||0);return Math.round(e*a)/a}Telegram.WebApp.onEvent("themeChanged",function(){document.getElementById("theme_data").innerHTML=JSON.stringify(Telegram.WebApp.themeParams,null,2)}),s.initDataUnsafe.query_id&&(document.getElementById("main_btn").style.display="block"),document.getElementById("with_webview_btn").style.display=s.initDataUnsafe.query_id&&!s.initDataUnsafe.receiver?"block":"none",document.getElementById("webview_data").innerHTML=JSON.stringify(s.initDataUnsafe,null,2),document.getElementById("theme_data").innerHTML=JSON.stringify(Telegram.WebApp.themeParams,null,2),document.getElementById("regular_link").setAttribute("href",document.getElementById("regular_link").getAttribute("href")+location.hash),document.getElementById("text_field").focus(),document.getElementById("regular_field").addEventListener("input",function(e){this.value.toLowerCase().indexOf("progress")>=0?Telegram.WebApp.MainButton.showProgress():Telegram.WebApp.MainButton.hideProgress()}),document.getElementById("ver").innerHTML=Telegram.WebApp.version,document.getElementById("platform").innerHTML=Telegram.WebApp.platform,s.initDataUnsafe.receiver?(document.getElementById("peer_wrap").style.display="block",document.getElementById("peer_name").innerHTML=s.initDataUnsafe.receiver.first_name+" "+s.initDataUnsafe.receiver.last_name,s.initDataUnsafe.receiver.photo_url?document.getElementById("peer_photo").setAttribute("src",s.initDataUnsafe.receiver.photo_url):document.getElementById("peer_photo").style.display="none"):s.initDataUnsafe.chat&&(document.getElementById("peer_wrap").style.display="block",document.getElementById("peer_name").innerHTML=s.initDataUnsafe.chat.title,s.initDataUnsafe.chat.photo_url?document.getElementById("peer_photo").setAttribute("src",s.initDataUnsafe.chat.photo_url):document.getElementById("peer_photo").style.display="none"),s.checkInitData(),s.init();function H(){document.querySelector(".viewport-border").setAttribute("text",window.innerWidth+" x "+g(Telegram.WebApp.viewportHeight,2)),document.querySelector(".viewport-stable_border").setAttribute("text",window.innerWidth+" x "+g(Telegram.WebApp.viewportStableHeight,2)+" | is_expanded: "+(Telegram.WebApp.isExpanded?"true":"false"))}Telegram.WebApp.setHeaderColor("secondary_bg_color"),Telegram.WebApp.onEvent("viewportChanged",H),H(),Telegram.WebApp.onEvent("settingsButtonClicked",function(){alert("Settings opened!")});let D=document.getElementById("bg_color_sel").value;const d=document.getElementById("bg_color_input"),T=document.getElementById("header_color_sel");d.value=Telegram.WebApp.backgroundColor,document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor),T.value="secondary_bg_color",T.addEventListener("change",function(e){const t=e.target.value;document.getElementById("top_sect").classList.toggle("second",t==="secondary_bg_color"),Telegram.WebApp.setHeaderColor(t),document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor)}),d.addEventListener("change",function(e){const t=e.target.value;document.getElementById("bg_color_val").textContent=t,T.value="custom",D=document.getElementById("bg_color_sel").value,Telegram.WebApp.setBackgroundColor(t),document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor)}),T.addEventListener("change",function(e){const t=e.target.value;t==="custom"?(T.value=D,d.focus()):(document.getElementById("bg_color_val").textContent="custom...",Telegram.WebApp.setBackgroundColor(t),document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor),d.value=Telegram.WebApp.backgroundColor,D=T.value)}),Telegram.WebApp.onEvent("themeChanged",function(){d.value=Telegram.WebApp.backgroundColor,document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor)}),s.testClipboard(document.getElementById("clipboard_test"))}),[]}class Ce extends _e{constructor(s){super(),ye(this,s,we,je,fe,{})}}export{Ce as component};
