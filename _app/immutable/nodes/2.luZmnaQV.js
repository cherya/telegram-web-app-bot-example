import{f as ze,s as De,h as ue,i as ke,j as ye,c as Ve,u as Le,g as He,d as Ue,n as W,k as Ce,l as Ne,m as We,r as Me,p as je}from"../chunks/scheduler.i60jWgnB.js";import{S as we,i as Be,g as p,h as k,j as C,f as b,y as Ae,a as M,p as Oe,t as se,b as Re,d as ne,z as Ee,m as Q,A as Te,n as F,k as r,x as h,o as Z,B as Y,s as S,r as qe,c as D,u as Ge,C as V,v as Je,w as Qe}from"../chunks/index.K2uzg1Tt.js";import{w as Ie,r as Fe}from"../chunks/index._73hDoBv.js";function Ke(l,e){const t={},a={},s={$$scope:1};let i=l.length;for(;i--;){const n=l[i],o=e[i];if(o){for(const c in n)c in o||(a[c]=1);for(const c in o)s[c]||(t[c]=o[c],s[c]=1);l[i]=o}else for(const c in n)s[c]=1}for(const n in a)n in t||(t[n]=void 0);return t}const le=Ie({valid:null,data:{}}),Xe="https://powerful-unbiased-gannet.ngrok-free.app",U={initData:Telegram.WebApp.initData||"",initDataUnsafe:Telegram.WebApp.initDataUnsafe||{},MainButton:Telegram.WebApp.MainButton,init(l){Telegram.WebApp.ready(),Telegram.WebApp.MainButton.setParams({text:"Close",is_visible:!0}).onClick(U.close)},expand(){Telegram.WebApp.expand()},close(){Telegram.WebApp.close()},toggleMainButton(l){const e=Telegram.WebApp.MainButton;e.isVisible?(e.hide(),l.innerHTML="Show Main Button"):(e.show(),l.innerHTML="Hide Main Button")},async checkInitData(l){if(l){le.set({valid:null,data:{}});let e={method:"GET",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"69420"}};const t=await fetch(`${Xe}/validate?${l}`,e),a=await t.json();return t.ok?(le.set({valid:!0,data:a}),a):(le.set({valid:!1,data:{}}),{})}return{}}},ce={};function xe(l){return l==="local"?localStorage:sessionStorage}function fe(l,e,t){const a=t?.serializer??JSON,s=t?.storage??"local";function i(n,o){xe(s).setItem(n,a.stringify(o))}if(!ce[l]){const n=Ie(e,f=>{const v=xe(s).getItem(l);v&&f(a.parse(v));{const u=g=>{g.key===l&&f(g.newValue?a.parse(g.newValue):null)};return window.addEventListener("storage",u),()=>window.removeEventListener("storage",u)}}),{subscribe:o,set:c}=n;ce[l]={set(f){i(l,f),c(f)},update(f){const v=f(ze(n));i(l,v),c(v)},subscribe:o}}return ce[l]}fe("modeOsPrefers",!1);fe("modeUserPrefers",void 0);fe("modeCurrent",!1);const Pe="(prefers-reduced-motion: reduce)";function Ye(){return window.matchMedia(Pe).matches}Fe(Ye(),l=>{{const e=a=>{l(a.matches)},t=window.matchMedia(Pe);return t.addEventListener("change",e),()=>{t.removeEventListener("change",e)}}});function Ze(l){let e;const t=l[17].default,a=Ve(t,l,l[16],null);return{c(){a&&a.c()},l(s){a&&a.l(s)},m(s,i){a&&a.m(s,i),e=!0},p(s,i){a&&a.p&&(!e||i&65536)&&Le(a,t,s,s[16],e?Ue(t,s[16],i,null):He(s[16]),null)},i(s){e||(ne(a,s),e=!0)},o(s){se(a,s),e=!1},d(s){a&&a.d(s)}}}function $e(l){let e,t,a=String(l[1]).substring(0,2).toUpperCase()+"",s,i;return{c(){e=Ee("svg"),t=Ee("text"),s=Q(a),this.h()},l(n){e=Te(n,"svg",{class:!0,viewBox:!0});var o=C(e);t=Te(o,"text",{x:!0,y:!0,"dominant-baseline":!0,"text-anchor":!0,"font-weight":!0,"font-size":!0,class:!0});var c=C(t);s=F(c,a),c.forEach(b),o.forEach(b),this.h()},h(){r(t,"x","50%"),r(t,"y","50%"),r(t,"dominant-baseline","central"),r(t,"text-anchor","middle"),r(t,"font-weight","bold"),r(t,"font-size",l[3]),r(t,"class",i="avatar-text "+l[2]),r(e,"class","avatar-initials w-full h-full"),r(e,"viewBox","0 0 512 512")},m(n,o){M(n,e,o),h(e,t),h(t,s)},p(n,o){o&2&&a!==(a=String(n[1]).substring(0,2).toUpperCase()+"")&&Z(s,a),o&8&&r(t,"font-size",n[3]),o&4&&i!==(i="avatar-text "+n[2])&&r(t,"class",i)},i:W,o:W,d(n){n&&b(e)}}}function et(l){let e,t,a,s,i,n,o;return{c(){e=p("img"),this.h()},l(c){e=k(c,"IMG",{class:!0,style:!0,src:!0,alt:!0}),this.h()},h(){r(e,"class","avatar-image "+lt),r(e,"style",t=l[9].style??""),Ce(e.src,a=l[0])||r(e,"src",a),r(e,"alt",s=l[9].alt||"")},m(c,f){M(c,e,f),n||(o=[Ne(i=l[5].call(null,e,l[6])),Y(e,"error",l[18])],n=!0)},p(c,f){f&512&&t!==(t=c[9].style??"")&&r(e,"style",t),f&1&&!Ce(e.src,a=c[0])&&r(e,"src",a),f&512&&s!==(s=c[9].alt||"")&&r(e,"alt",s),i&&We(i.update)&&f&64&&i.update.call(null,c[6])},i:W,o:W,d(c){c&&b(e),n=!1,Me(o)}}}function tt(l){let e,t,a,s,i;const n=[et,$e,Ze],o=[];function c(u,g){return u[0]||u[4]?0:u[1]?1:2}t=c(l),a=o[t]=n[t](l);let f=[{class:s="avatar "+l[7]},{"data-testid":"avatar"},l[8]()],v={};for(let u=0;u<f.length;u+=1)v=ue(v,f[u]);return{c(){e=p("figure"),a.c(),this.h()},l(u){e=k(u,"FIGURE",{class:!0,"data-testid":!0});var g=C(e);a.l(g),g.forEach(b),this.h()},h(){Ae(e,v)},m(u,g){M(u,e,g),o[t].m(e,null),i=!0},p(u,[g]){let A=t;t=c(u),t===A?o[t].p(u,g):(Oe(),se(o[A],1,1,()=>{o[A]=null}),Re(),a=o[t],a?a.p(u,g):(a=o[t]=n[t](u),a.c()),ne(a,1),a.m(e,null)),Ae(e,v=Ke(f,[(!i||g&128&&s!==(s="avatar "+u[7]))&&{class:s},{"data-testid":"avatar"},u[8]()]))},i(u){i||(ne(a),i=!0)},o(u){se(a),i=!1},d(u){u&&b(e),o[t].d()}}}let at="flex aspect-square text-surface-50 font-semibold justify-center items-center overflow-hidden isolate",lt="w-full object-cover";function st(l,e,t){let a;const s=["initials","fill","fontSize","src","fallback","action","actionParams","background","width","border","rounded","shadow","cursor"];let i=ke(e,s),{$$slots:n={},$$scope:o}=e,{initials:c=""}=e,{fill:f="fill-token"}=e,{fontSize:v=150}=e,{src:u=""}=e,{fallback:g=""}=e,{action:A=()=>{}}=e,{actionParams:j=""}=e,{background:w="bg-surface-400-500-token"}=e,{width:O="w-16"}=e,{border:N=""}=e,{rounded:L="rounded-full"}=e,{shadow:x=""}=e,{cursor:R=""}=e;function K(){return delete i.class,i}const q=()=>t(0,u=g);return l.$$set=d=>{t(9,e=ue(ue({},e),ye(d))),t(19,i=ke(e,s)),"initials"in d&&t(1,c=d.initials),"fill"in d&&t(2,f=d.fill),"fontSize"in d&&t(3,v=d.fontSize),"src"in d&&t(0,u=d.src),"fallback"in d&&t(4,g=d.fallback),"action"in d&&t(5,A=d.action),"actionParams"in d&&t(6,j=d.actionParams),"background"in d&&t(10,w=d.background),"width"in d&&t(11,O=d.width),"border"in d&&t(12,N=d.border),"rounded"in d&&t(13,L=d.rounded),"shadow"in d&&t(14,x=d.shadow),"cursor"in d&&t(15,R=d.cursor),"$$scope"in d&&t(16,o=d.$$scope)},l.$$.update=()=>{t(7,a=`${at} ${w} ${O} ${N} ${L} ${x} ${R} ${e.class??""}`)},e=ye(e),[u,c,f,v,g,A,j,a,K,e,w,O,N,L,x,R,o,n,q]}class nt extends we{constructor(e){super(),Be(this,e,st,tt,De,{initials:1,fill:2,fontSize:3,src:0,fallback:4,action:5,actionParams:6,background:10,width:11,border:12,rounded:13,shadow:14,cursor:15})}}function Se(l){let e,t='<div class="fa-solid fa-triangle-exclamation text-4xl"></div> <div class="alert-message"><h3 class="h3">Invalid initData</h3> <p>Can&#39;t validate the data. Ensure that page is opened from Telegram app and try again.</p></div>';return{c(){e=p("aside"),e.innerHTML=t,this.h()},l(a){e=k(a,"ASIDE",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-4yd9c1"&&(e.innerHTML=t),this.h()},h(){r(e,"class","alert variant-filled-error rounded-md")},m(a,s){M(a,e,s)},d(a){a&&b(e)}}}function it(l){let e;return{c(){e=p("span"),this.h()},l(t){e=k(t,"SPAN",{class:!0}),C(e).forEach(b),this.h()},h(){r(e,"class","badge-icon variant-filled-warning animate-pulse absolute -bottom-0 -left-0 z-10")},m(t,a){M(t,e,a)},d(t){t&&b(e)}}}function rt(l){let e;return{c(){e=p("span"),this.h()},l(t){e=k(t,"SPAN",{class:!0}),C(e).forEach(b),this.h()},h(){r(e,"class","badge-icon variant-filled-error absolute -bottom-0 -left-0 z-10")},m(t,a){M(t,e,a)},d(t){t&&b(e)}}}function ot(l){let e;return{c(){e=p("span"),this.h()},l(t){e=k(t,"SPAN",{class:!0}),C(e).forEach(b),this.h()},h(){r(e,"class","badge-icon variant-filled-success absolute -bottom-0 -left-0 z-10")},m(t,a){M(t,e,a)},d(t){t&&b(e)}}}function ct(l){let e,t='<div class="placeholder animate-pulse rounded-md mt-2"></div> <div class="placeholder animate-pulse rounded-md mt-4"></div>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(a){e=k(a,"DIV",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-gsq5xa"&&(e.innerHTML=t),this.h()},h(){r(e,"class","flex-1 ml-8")},m(a,s){M(a,e,s)},p:W,d(a){a&&b(e)}}}function ut(l){let e,t,a=l[1].first_name+"",s,i,n,o,c=l[1].username+"",f;return{c(){e=p("div"),t=p("h1"),s=Q(a),i=S(),n=p("p"),o=Q("@"),f=Q(c),this.h()},l(v){e=k(v,"DIV",{class:!0});var u=C(e);t=k(u,"H1",{class:!0});var g=C(t);s=F(g,a),g.forEach(b),i=D(u),n=k(u,"P",{class:!0});var A=C(n);o=F(A,"@"),f=F(A,c),A.forEach(b),u.forEach(b),this.h()},h(){r(t,"class","text-2xl font-bold"),r(n,"class","text-gray-500"),r(e,"class","flex-1 ml-8")},m(v,u){M(v,e,u),h(e,t),h(t,s),h(e,i),h(e,n),h(n,o),h(n,f)},p(v,u){u&2&&a!==(a=v[1].first_name+"")&&Z(s,a),u&2&&c!==(c=v[1].username+"")&&Z(f,c)},d(v){v&&b(e)}}}function ft(l){let e;return{c(){e=p("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),C(e).forEach(b),this.h()},h(){r(e,"class","placeholder animate-pulse rounded-md")},m(t,a){M(t,e,a)},p:W,d(t){t&&b(e)}}}function dt(l){let e,t="validation failded";return{c(){e=p("div"),e.textContent=t,this.h()},l(a){e=k(a,"DIV",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-13s60je"&&(e.textContent=t),this.h()},h(){r(e,"class","text-center")},m(a,s){M(a,e,s)},p:W,d(a){a&&b(e)}}}function ht(l){let e,t=JSON.stringify(l[1],null,2)+"",a;return{c(){e=p("pre"),a=Q(t),this.h()},l(s){e=k(s,"PRE",{class:!0});var i=C(e);a=F(i,t),i.forEach(b),this.h()},h(){r(e,"class","pre rounded-md svelte-t70oqn")},m(s,i){M(s,e,i),h(e,a)},p(s,i){i&2&&t!==(t=JSON.stringify(s[1],null,2)+"")&&Z(a,t)},d(s){s&&b(e)}}}function mt(l){let e,t,a,s,i,n,o,c,f,v="initData:",u,g,A,j,w,O="Validated user data:",N,L,x,R="Re-validate data",K,q,d,H,I,de="Expand WebView",ie,P,he="Close WebView",re,z,me="Toggle Main Button",X,oe,_e,E=l[0]===!1&&Se();function be(m,_){if(m[0]===!0)return ot;if(m[0]===!1)return rt;if(m[0]===null)return it}let G=be(l),T=G&&G(l);n=new nt({});function ve(m,_){return m[0]===!0?ut:ct}let $=ve(l),B=$(l);function ge(m,_){if(m[0]===!0)return ht;if(m[0]===!1)return dt;if(m[0]===null)return ft}let J=ge(l),y=J&&J(l);return{c(){e=p("div"),E&&E.c(),t=S(),a=p("div"),s=p("div"),T&&T.c(),i=S(),qe(n.$$.fragment),o=S(),B.c(),c=S(),f=p("h6"),f.textContent=v,u=S(),g=p("pre"),A=Q(l[2]),j=S(),w=p("h6"),w.textContent=O,N=S(),y&&y.c(),L=S(),x=p("button"),x.textContent=R,K=S(),q=p("hr"),d=S(),H=p("div"),I=p("button"),I.textContent=de,ie=S(),P=p("button"),P.textContent=he,re=S(),z=p("button"),z.textContent=me,this.h()},l(m){e=k(m,"DIV",{class:!0});var _=C(e);E&&E.l(_),t=D(_),a=k(_,"DIV",{class:!0});var ee=C(a);s=k(ee,"DIV",{class:!0});var te=C(s);T&&T.l(te),i=D(te),Ge(n.$$.fragment,te),te.forEach(b),o=D(ee),B.l(ee),ee.forEach(b),c=D(_),f=k(_,"H6",{class:!0,"data-svelte-h":!0}),V(f)!=="svelte-h4l6vz"&&(f.textContent=v),u=D(_),g=k(_,"PRE",{class:!0});var pe=C(g);A=F(pe,l[2]),pe.forEach(b),j=D(_),w=k(_,"H6",{class:!0,"data-svelte-h":!0}),V(w)!=="svelte-1y4ptn6"&&(w.textContent=O),N=D(_),y&&y.l(_),L=D(_),x=k(_,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),V(x)!=="svelte-1dehkth"&&(x.textContent=R),K=D(_),q=k(_,"HR",{class:!0}),d=D(_),H=k(_,"DIV",{class:!0});var ae=C(H);I=k(ae,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),V(I)!=="svelte-c5bc2"&&(I.textContent=de),ie=D(ae),P=k(ae,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),V(P)!=="svelte-1wo3l5e"&&(P.textContent=he),ae.forEach(b),re=D(_),z=k(_,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),V(z)!=="svelte-lu7p63"&&(z.textContent=me),_.forEach(b),this.h()},h(){r(s,"class","relative inline-block flex-none"),r(a,"class","flex"),r(f,"class","h6"),r(g,"class","pre rounded-md svelte-t70oqn"),r(w,"class","h6"),r(x,"type","button"),r(x,"class","btn variant-filled rounded-md"),r(q,"class","!border-t-4"),r(I,"type","button"),r(I,"class","btn variant-filled rounded-md flex-1"),r(P,"type","button"),r(P,"class","btn variant-filled rounded-md flex-1"),r(H,"class","flex space-x-2 flex-wrap"),r(z,"type","button"),r(z,"class","btn variant-filled rounded-md w-full"),r(e,"class","container container mx-auto p-6 space-y-4")},m(m,_){M(m,e,_),E&&E.m(e,null),h(e,t),h(e,a),h(a,s),T&&T.m(s,null),h(s,i),Je(n,s,null),h(a,o),B.m(a,null),h(e,c),h(e,f),h(e,u),h(e,g),h(g,A),h(e,j),h(e,w),h(e,N),y&&y.m(e,null),h(e,L),h(e,x),h(e,K),h(e,q),h(e,d),h(e,H),h(H,I),h(H,ie),h(H,P),h(e,re),h(e,z),X=!0,oe||(_e=[Y(x,"click",l[3]),Y(I,"click",U.expand()),Y(P,"click",U.close()),Y(z,"click",U.toggleMainButton())],oe=!0)},p(m,[_]){m[0]===!1?E||(E=Se(),E.c(),E.m(e,t)):E&&(E.d(1),E=null),G!==(G=be(m))&&(T&&T.d(1),T=G&&G(m),T&&(T.c(),T.m(s,i))),$===($=ve(m))&&B?B.p(m,_):(B.d(1),B=$(m),B&&(B.c(),B.m(a,null))),(!X||_&4)&&Z(A,m[2]),J===(J=ge(m))&&y?y.p(m,_):(y&&y.d(1),y=J&&J(m),y&&(y.c(),y.m(e,L)))},i(m){X||(ne(n.$$.fragment,m),X=!0)},o(m){se(n.$$.fragment,m),X=!1},d(m){m&&b(e),E&&E.d(),T&&T.d(),Qe(n),B.d(),y&&y.d(),oe=!1,Me(_e)}}}function _t(l,e,t){let a=!1,s={},i=le.subscribe(f=>{t(0,a=f.valid),t(1,s=f.data.user)}),n=U.initData;n===""&&(n="query_id=AAEMjsEBAAAAAAyOwQGvrIHL&user=%7B%22id%22%3A29462028%2C%22first_name%22%3A%22Ilia%22%2C%22last_name%22%3A%22%22%2C%22username%22%3A%22cherya%22%2C%22language_code%22%3A%22en%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%7D&auth_date=1721554069&hash=b9a1a2753acbd55e974fb118f3cc03ea484f98cac8e5c89f5aede16b4b8c2dab");let o=U.checkInitData(n);o.then(()=>{U.init()}).catch(f=>{console.error(f)});function c(f){try{o=U.checkInitData(n)}catch(v){console.error(v)}}return je(i),[a,s,n,c]}class pt extends we{constructor(e){super(),Be(this,e,_t,mt,De,{})}}export{pt as component};
