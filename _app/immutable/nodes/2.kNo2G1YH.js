import{i as U,f as V,h as D,j as O,s as P,n as B}from"../chunks/scheduler.FBjjn5oP.js";import{p as L,t as z,b as R,d as $,S as q,i as G,g as v,s as x,m as C,h as k,j as w,y as W,c as y,n as T,f as b,k as m,a as E,x as p,z as H,o as M}from"../chunks/index.Yx7fxxdr.js";function S(t,e){const r=e.token={};function n(s,a,l,h){if(e.token!==r)return;e.resolved=h;let i=e.ctx;l!==void 0&&(i=i.slice(),i[l]=h);const u=s&&(e.current=s)(i);let A=!1;e.block&&(e.blocks?e.blocks.forEach((d,f)=>{f!==a&&d&&(L(),z(d,1,1,()=>{e.blocks[f]===d&&(e.blocks[f]=null)}),R())}):e.block.d(1),u.c(),$(u,1),u.m(e.mount(),e.anchor),A=!0),e.block=u,e.blocks&&(e.blocks[a]=u),A&&O()}if(U(t)){const s=V();if(t.then(a=>{D(s),n(e.then,1,e.value,a),D(null)},a=>{if(D(s),n(e.catch,2,e.error,a),D(null),!e.hasCatch)throw a}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function J(t,e,r){const n=e.slice(),{resolved:s}=t;t.current===t.then&&(n[t.value]=s),t.current===t.catch&&(n[t.error]=s),t.block.p(n,r)}const N="https://powerful-unbiased-gannet.ngrok-free.app";function Q(){if(window&&window.Telegram)return window.Telegram.WebApp;throw new Error("Telegram is not available")}const _={initData:Telegram.WebApp.initData||"",initDataUnsafe:Telegram.WebApp.initDataUnsafe||{},MainButton:Telegram.WebApp.MainButton,init(t){document.body.style.visibility="",Telegram.WebApp.ready(),Telegram.WebApp.MainButton.setParams({text:"CLOSE WEBVIEW",is_visible:!0}).onClick(_.close)},expand(){Telegram.WebApp.expand()},close(){Telegram.WebApp.close()},toggleMainButton(t){const e=Telegram.WebApp.MainButton;e.isVisible?(e.hide(),t.innerHTML="Show Main Button"):(e.show(),t.innerHTML="Hide Main Button")},async checkInitData(){if(_.initDataUnsafe.query_id&&_.initData){let t={method:"GET",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"69420"}};const e=await fetch(`${N}/validate?${_.initData}`,t),r=await e.json();return console.log("respData:",r),e.ok?(params=new URLSearchParams(_.initData),data=Object.fromEntries(params),console.log("initData:",data),data):{}}return{}}};function F(t){let e,r,n=t[6].message+"",s;return{c(){e=v("div"),r=C("Error: "),s=C(n),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=w(e);r=T(l,"Error: "),s=T(l,n),l.forEach(b),this.h()},h(){m(e,"class","text-center")},m(a,l){E(a,e,l),p(e,r),p(e,s)},p(a,l){l&4&&n!==(n=a[6].message+"")&&M(s,n)},d(a){a&&b(e)}}}function K(t){let e,r=JSON.stringify(t[1])+"",n;return{c(){e=v("pre"),n=C(r),this.h()},l(s){e=k(s,"PRE",{class:!0});var a=w(e);n=T(a,r),a.forEach(b),this.h()},h(){m(e,"class","pre")},m(s,a){E(s,e,a),p(e,n)},p(s,a){a&2&&r!==(r=JSON.stringify(s[1])+"")&&M(n,r)},d(s){s&&b(e)}}}function X(t){let e,r="Validating...";return{c(){e=v("div"),e.textContent=r,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-2l0okz"&&(e.textContent=r),this.h()},h(){m(e,"class","text-center")},m(n,s){E(n,e,s)},p:B,d(n){n&&b(e)}}}function Y(t){let e,r,n="Go to test page",s,a,l,h,i,u="Validate data",A,d,f,I,o={ctx:t,current:null,token:null,hasCatch:!0,pending:X,then:K,catch:F,value:5,error:6};return S(d=t[2],o),{c(){e=v("div"),r=v("a"),r.textContent=n,s=x(),a=v("pre"),l=C(t[0]),h=x(),i=v("button"),i.textContent=u,A=x(),o.block.c(),this.h()},l(g){e=k(g,"DIV",{class:!0});var c=w(e);r=k(c,"A",{href:!0,"data-svelte-h":!0}),W(r)!=="svelte-1r9mezx"&&(r.textContent=n),s=y(c),a=k(c,"PRE",{class:!0});var j=w(a);l=T(j,t[0]),j.forEach(b),h=y(c),i=k(c,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),W(i)!=="svelte-zf5j67"&&(i.textContent=u),A=y(c),o.block.l(c),c.forEach(b),this.h()},h(){m(r,"href","/test"),m(a,"class","pre"),m(i,"type","button"),m(i,"class","btn variant-filled rounded-md"),m(e,"class","container container mx-auto p-8 space-y-8")},m(g,c){E(g,e,c),p(e,r),p(e,s),p(e,a),p(a,l),p(e,h),p(e,i),p(e,A),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=null,f||(I=H(i,"click",t[3]),f=!0)},p(g,[c]){t=g,c&1&&M(l,t[0]),o.ctx=t,c&4&&d!==(d=t[2])&&S(d,o)||J(o,t,c)},i:B,o:B,d(g){g&&b(e),o.block.d(),o.token=null,o=null,f=!1,I()}}}function Z(t,e,r){let n=Q(),s=n.initData,a;_.init(),s||(s="query_id=AAEMjsEBAAAAAAyOwQG1I0CJ&user=%7B%22id%22%3A29462028%2C%22first_name%22%3A%22Ilia%22%2C%22last_name%22%3A%22%22%2C%22username%22%3A%22cherya%22%2C%22language_code%22%3A%22en%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%7D&auth_date=1721476450&hash=502fbda46aef83d390b89b8e203e44303cc5393740522026e864dc43da094bf1");let l=_.checkInitData();function h(i){try{r(2,l=_.checkInitData()),r(1,a=n.initDataUnsafe)}catch(u){console.error(u)}}return[s,a,l,h]}class ae extends q{constructor(e){super(),G(this,e,Z,Y,P,{})}}export{ae as component};
