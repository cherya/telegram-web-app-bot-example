import{i as j,f as P,h as x,j as U,s as $,n as B}from"../chunks/scheduler.FBjjn5oP.js";import{p as L,t as O,b as R,d as z,S as H,i as N,g as k,s as w,m as C,h as g,j as E,y as W,c as A,n as T,f as b,k as m,a as y,x as u,z as q,o as V}from"../chunks/index.Yx7fxxdr.js";import{b as G}from"../chunks/paths.nG-l7Ku6.js";function S(e,t){const r=t.token={};function n(a,s,l,p){if(t.token!==r)return;t.resolved=p;let c=t.ctx;l!==void 0&&(c=c.slice(),c[l]=p);const h=a&&(t.current=a)(c);let D=!1;t.block&&(t.blocks?t.blocks.forEach((d,f)=>{f!==s&&d&&(L(),O(d,1,1,()=>{t.blocks[f]===d&&(t.blocks[f]=null)}),R())}):t.block.d(1),h.c(),z(h,1),h.m(t.mount(),t.anchor),D=!0),t.block=h,t.blocks&&(t.blocks[s]=h),D&&U()}if(j(e)){const a=P();if(e.then(s=>{x(a),n(t.then,1,t.value,s),x(null)},s=>{if(x(a),n(t.catch,2,t.error,s),x(null),!t.hasCatch)throw s}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,e),!0;t.resolved=e}}function J(e,t,r){const n=t.slice(),{resolved:a}=e;e.current===e.then&&(n[e.value]=a),e.current===e.catch&&(n[e.error]=a),e.block.p(n,r)}const F="https://powerful-unbiased-gannet.ngrok-free.app",_={initData:Telegram.WebApp.initData||"",initDataUnsafe:Telegram.WebApp.initDataUnsafe||{},MainButton:Telegram.WebApp.MainButton,init(e){document.body.style.visibility="",Telegram.WebApp.ready(),Telegram.WebApp.MainButton.setParams({text:"CLOSE WEBVIEW",is_visible:!0}).onClick(_.close)},expand(){Telegram.WebApp.expand()},close(){Telegram.WebApp.close()},toggleMainButton(e){const t=Telegram.WebApp.MainButton;t.isVisible?(t.hide(),e.innerHTML="Show Main Button"):(t.show(),e.innerHTML="Hide Main Button")},async checkInitData(){if(_.initDataUnsafe.query_id&&_.initData){let e={method:"GET",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"69420"}};const t=await fetch(`${F}/validate?${_.initData}`,e),r=await t.json();if(console.log("respData:",r),!t.ok)return{};let n=new URLSearchParams(_.initData),a=Object.fromEntries(n);return console.log("initData:",a),a}return{}}};function K(e){let t,r,n=e[4].message+"",a;return{c(){t=k("div"),r=C("Error: "),a=C(n),this.h()},l(s){t=g(s,"DIV",{class:!0});var l=E(t);r=T(l,"Error: "),a=T(l,n),l.forEach(b),this.h()},h(){m(t,"class","text-center")},m(s,l){y(s,t,l),u(t,r),u(t,a)},p(s,l){l&1&&n!==(n=s[4].message+"")&&V(a,n)},d(s){s&&b(t)}}}function Q(e){let t,r=JSON.stringify(e[3],null,2)+"",n;return{c(){t=k("pre"),n=C(r),this.h()},l(a){t=g(a,"PRE",{class:!0});var s=E(t);n=T(s,r),s.forEach(b),this.h()},h(){m(t,"class","pre")},m(a,s){y(a,t,s),u(t,n)},p(a,s){s&1&&r!==(r=JSON.stringify(a[3],null,2)+"")&&V(n,r)},d(a){a&&b(t)}}}function X(e){let t,r="Validating...";return{c(){t=k("div"),t.textContent=r,this.h()},l(n){t=g(n,"DIV",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-2l0okz"&&(t.textContent=r),this.h()},h(){m(t,"class","text-center")},m(n,a){y(n,t,a)},p:B,d(n){n&&b(t)}}}function Y(e){let t,r,n="Go to test page",a,s,l,p,c,h="Validate data",D,d,f,M,o={ctx:e,current:null,token:null,hasCatch:!0,pending:X,then:Q,catch:K,value:3,error:4};return S(d=e[0],o),{c(){t=k("div"),r=k("a"),r.textContent=n,a=w(),s=k("pre"),l=C(e[1]),p=w(),c=k("button"),c.textContent=h,D=w(),o.block.c(),this.h()},l(v){t=g(v,"DIV",{class:!0});var i=E(t);r=g(i,"A",{href:!0,"data-svelte-h":!0}),W(r)!=="svelte-1um8ttw"&&(r.textContent=n),a=A(i),s=g(i,"PRE",{class:!0});var I=E(s);l=T(I,e[1]),I.forEach(b),p=A(i),c=g(i,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),W(c)!=="svelte-zf5j67"&&(c.textContent=h),D=A(i),o.block.l(i),i.forEach(b),this.h()},h(){m(r,"href",G+"/test"),m(s,"class","pre"),m(c,"type","button"),m(c,"class","btn variant-filled rounded-md"),m(t,"class","container container mx-auto p-8 space-y-8")},m(v,i){y(v,t,i),u(t,r),u(t,a),u(t,s),u(s,l),u(t,p),u(t,c),u(t,D),o.block.m(t,o.anchor=null),o.mount=()=>t,o.anchor=null,f||(M=q(c,"click",e[2]),f=!0)},p(v,[i]){e=v,o.ctx=e,i&1&&d!==(d=e[0])&&S(d,o)||J(o,e,i)},i:B,o:B,d(v){v&&b(t),o.block.d(),o.token=null,o=null,f=!1,M()}}}function Z(e,t,r){let n=_.initData,a=_.checkInitData();function s(l){try{r(0,a=_.checkInitData())}catch(p){console.error(p)}}return[a,n,s]}class nt extends H{constructor(t){super(),N(this,t,Z,Y,$,{})}}export{nt as component};
