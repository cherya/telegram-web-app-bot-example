import{s as _e,n as ae}from"../chunks/scheduler.SiZdlcgb.js";import{S as ye,i as Ae,g as o,s as v,m as me,h as r,j as C,y as m,c as b,f as y,n as ge,k as i,l as Te,A as P,a as we,x as n}from"../chunks/index.ndoocLBO.js";function xe(A){let l,a,c,T="Send «Hello, World!»",e,t,s="Send «Hello, World!» with inline webview button",p,u,ne="Send current time to bot (x10)",F,E,ie="Expand Webview",R,W,oe="Hide Main Button",Q,I,z,D,J,S,re='<img id="peer_photo" class="chat_img svelte-9bvidl" src=""/> <span id="peer_name"></span>',K,M,$,q,g,ce="bg_color",w,de="secondary_bg_color",G,x,X,L,Y,B,f,pe="bg_color",k,ue="secondary_bg_color",h,ve="custom...",Z,H,be=`<div id="btn_status" class="hint svelte-9bvidl" style="display: none;"></div> <p class="svelte-9bvidl">Test links:</p> <ul class="svelte-9bvidl"><li class="svelte-9bvidl"><a id="regular_link" href="" class="svelte-9bvidl">Regular link #2</a> (opens inside webview)</li> <li class="svelte-9bvidl"><a href="https://telegram.org/" target="_blank" class="svelte-9bvidl">target=&quot;_blank&quot; link</a>
        (opens outside webview)</li> <li class="svelte-9bvidl"><a href="javascript:window.open(&#39;https://telegram.org/&#39;);" class="svelte-9bvidl">window.open() link</a> (opens outside webview)</li> <li class="svelte-9bvidl"><a href="https://t.me/like" class="svelte-9bvidl">LikeBot t.me link</a> (opens inside Telegram
        app)</li> <li class="svelte-9bvidl"><a href="javascript:Telegram.WebApp.openTelegramLink(&#39;https://t.me/vote&#39;);" class="svelte-9bvidl">web_app_open_tg_link()</a> (opens inside Telegram app)</li> <li class="svelte-9bvidl"><a href="javascript:Telegram.WebApp.openLink(&#39;https://google.com/&#39;);" class="svelte-9bvidl">web_app_open_link()</a> (opens outside webview)</li> <li class="svelte-9bvidl"><a href="tg://resolve?domain=vote" class="svelte-9bvidl">VoteBot tg:// link</a> (does not open)</li></ul> <p class="svelte-9bvidl">Test permissions:</p> <ul class="svelte-9bvidl"><li class="svelte-9bvidl"><a href="javascript:;" onclick="return DemoApp.requestLocation(this);" class="svelte-9bvidl">Request Location</a> <span></span></li> <li class="svelte-9bvidl"><a href="javascript:;" onclick="return DemoApp.requestVideo(this);" class="svelte-9bvidl">Request Video</a> <span></span></li> <li class="svelte-9bvidl"><a href="javascript:;" onclick="return DemoApp.requestAudio(this);" class="svelte-9bvidl">Request Audio</a> <span></span></li> <li class="svelte-9bvidl"><a href="javascript:;" onclick="return DemoApp.requestAudioVideo(this);" class="svelte-9bvidl">Request Audio+Video</a> <span></span></li> <li class="svelte-9bvidl"><a href="javascript:;" onclick="return DemoApp.testClipboard(this);" id="clipboard_test" class="svelte-9bvidl">Read from clipboard</a> <span></span></li></ul> <p class="svelte-9bvidl">Test alerts:</p> <div class="columns svelte-9bvidl"><ul class="svelte-9bvidl"><li class="svelte-9bvidl"><a href="javascript:;" onclick="alert(&#39;Hello!&#39;);" class="svelte-9bvidl">alert</a></li> <li class="svelte-9bvidl"><a href="javascript:;" onclick="confirm(&#39;Are you sure?&#39;);" class="svelte-9bvidl">confirm</a></li> <li class="svelte-9bvidl"><a href="javascript:;" onclick="prompt(&#39;How old are you?&#39;);" class="svelte-9bvidl">prompt</a></li></ul> <ul class="svelte-9bvidl"><li class="svelte-9bvidl"><a href="javascript:;" onclick="DemoApp.showAlert(&#39;Hello!&#39;);" class="svelte-9bvidl">showAlert</a></li> <li class="svelte-9bvidl"><a href="javascript:;" onclick="DemoApp.showConfirm(&#39;Are you sure?&#39;);" class="svelte-9bvidl">showConfirm</a></li> <li class="svelte-9bvidl"><a href="javascript:;" onclick="DemoApp.requestWriteAccess();" class="svelte-9bvidl">requestWriteAccess</a></li> <li class="svelte-9bvidl"><a href="javascript:;" onclick="DemoApp.requestContact();" class="svelte-9bvidl">requestContact</a></li> <li class="svelte-9bvidl"><a href="javascript:;" onclick="DemoApp.showPopup();" class="svelte-9bvidl">showPopup</a></li> <li class="svelte-9bvidl"><a href="javascript:;" onclick="DemoApp.showScanQrPopup();" class="svelte-9bvidl">showScanQrPopup</a></li> <li class="svelte-9bvidl"><a href="javascript:;" onclick="DemoApp.showScanQrPopup(true);" class="svelte-9bvidl">showScanQrPopup (links only)</a></li></ul></div> <p class="svelte-9bvidl">Haptics:</p> <ul class="svelte-9bvidl"><li class="svelte-9bvidl">Impact: <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;heavy&#39;);" class="svelte-9bvidl">heavy</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;light&#39;);" class="svelte-9bvidl">light</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;medium&#39;);" class="svelte-9bvidl">medium</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;rigid&#39;);" class="svelte-9bvidl">rigid</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;soft&#39;);" class="svelte-9bvidl">soft</a><br/><br/></li> <li class="svelte-9bvidl">Notification: <a href="javascript:Telegram.WebApp.HapticFeedback.notificationOccurred(&#39;error&#39;);" class="svelte-9bvidl">error</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.notificationOccurred(&#39;success&#39;);" class="svelte-9bvidl">success</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.notificationOccurred(&#39;warning&#39;);" class="svelte-9bvidl">warning</a><br/><br/></li> <li class="svelte-9bvidl">Selection: <a href="javascript:Telegram.WebApp.HapticFeedback.selectionChanged();" class="svelte-9bvidl">changed</a><br/><br/></li></ul> <pre class="svelte-9bvidl"><code id="webview_data"></code></pre> <div class="hint svelte-9bvidl">Data passed to webview.
      <span id="webview_data_status" class="status_need svelte-9bvidl">Checking hash...</span></div> <pre class="svelte-9bvidl"><code id="theme_data"></code></pre> <div class="hint svelte-9bvidl">Theme params</div> <div class="hint svelte-9bvidl">Version: <span id="ver"></span>, platform: <span id="platform"></span></div>`,ee,N,te,U;return{c(){l=o("div"),a=o("section"),c=o("button"),c.textContent=T,e=v(),t=o("button"),t.textContent=s,p=v(),u=o("button"),u.textContent=ne,F=v(),E=o("button"),E.textContent=ie,R=v(),W=o("button"),W.textContent=oe,Q=v(),I=o("input"),z=v(),D=o("div"),J=v(),S=o("div"),S.innerHTML=re,K=v(),M=o("div"),$=me("Header: "),q=o("select"),g=o("option"),g.textContent=ce,w=o("option"),w.textContent=de,G=v(),x=o("div"),X=me("Background: "),L=o("input"),Y=v(),B=o("select"),f=o("option"),f.textContent=pe,k=o("option"),k.textContent=ue,h=o("option"),h.textContent=ve,Z=v(),H=o("section"),H.innerHTML=be,ee=v(),N=o("div"),te=v(),U=o("div"),this.h()},l(O){l=r(O,"DIV",{class:!0});var _=C(l);a=r(_,"SECTION",{id:!0,class:!0});var d=C(a);c=r(d,"BUTTON",{id:!0,onclick:!0,class:!0,"data-svelte-h":!0}),m(c)!=="svelte-1lcrk0"&&(c.textContent=T),e=b(d),t=r(d,"BUTTON",{id:!0,onclick:!0,class:!0,"data-svelte-h":!0}),m(t)!=="svelte-zutttf"&&(t.textContent=s),p=b(d),u=r(d,"BUTTON",{id:!0,onclick:!0,class:!0,"data-svelte-h":!0}),m(u)!=="svelte-125ccpw"&&(u.textContent=ne),F=b(d),E=r(d,"BUTTON",{onclick:!0,class:!0,"data-svelte-h":!0}),m(E)!=="svelte-1qkzyz3"&&(E.textContent=ie),R=b(d),W=r(d,"BUTTON",{onclick:!0,class:!0,"data-svelte-h":!0}),m(W)!=="svelte-1qs826o"&&(W.textContent=oe),Q=b(d),I=r(d,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),z=b(d),D=r(d,"DIV",{class:!0,contenteditable:!0,"data-placeholder":!0,id:!0}),C(D).forEach(y),J=b(d),S=r(d,"DIV",{id:!0,style:!0,"data-svelte-h":!0}),m(S)!=="svelte-er9q7j"&&(S.innerHTML=re),K=b(d),M=r(d,"DIV",{class:!0});var le=C(M);$=ge(le,"Header: "),q=r(le,"SELECT",{id:!0});var se=C(q);g=r(se,"OPTION",{"data-svelte-h":!0}),m(g)!=="svelte-12yzkyt"&&(g.textContent=ce),w=r(se,"OPTION",{"data-svelte-h":!0}),m(w)!=="svelte-1x10bni"&&(w.textContent=de),se.forEach(y),le.forEach(y),G=b(d),x=r(d,"DIV",{class:!0});var j=C(x);X=ge(j,"Background: "),L=r(j,"INPUT",{type:!0,id:!0}),Y=b(j),B=r(j,"SELECT",{id:!0});var V=C(B);f=r(V,"OPTION",{"data-svelte-h":!0}),m(f)!=="svelte-12yzkyt"&&(f.textContent=pe),k=r(V,"OPTION",{"data-svelte-h":!0}),m(k)!=="svelte-1x10bni"&&(k.textContent=ue),h=r(V,"OPTION",{id:!0,"data-svelte-h":!0}),m(h)!=="svelte-z7gcmv"&&(h.textContent=ve),V.forEach(y),j.forEach(y),d.forEach(y),Z=b(_),H=r(_,"SECTION",{class:!0,"data-svelte-h":!0}),m(H)!=="svelte-1217p0s"&&(H.innerHTML=be),ee=b(_),N=r(_,"DIV",{class:!0}),C(N).forEach(y),te=b(_),U=r(_,"DIV",{class:!0}),C(U).forEach(y),_.forEach(y),this.h()},h(){i(c,"id","main_btn"),i(c,"onclick","DemoApp.sendMessage('');"),i(c,"class","svelte-9bvidl"),i(t,"id","with_webview_btn"),i(t,"onclick","DemoApp.sendMessage('', true);"),i(t,"class","svelte-9bvidl"),i(u,"id","data_btn"),i(u,"onclick","DemoApp.sendTime(true);"),i(u,"class","svelte-9bvidl"),i(E,"onclick","DemoApp.expand();"),i(E,"class","svelte-9bvidl"),i(W,"onclick","DemoApp.toggleMainButton(this);"),i(W,"class","svelte-9bvidl"),i(I,"type","text"),i(I,"placeholder","Input text in regular input..."),i(I,"id","regular_field"),i(I,"class","svelte-9bvidl"),i(D,"class","input svelte-9bvidl"),i(D,"contenteditable","true"),i(D,"data-placeholder","Input text in contenteditable field..."),i(D,"id","text_field"),i(S,"id","peer_wrap"),Te(S,"display","none"),g.__value="bg_color",P(g,g.__value),g.selected=!0,w.__value="secondary_bg_color",P(w,w.__value),i(q,"id","header_color_sel"),i(M,"class","sect_row svelte-9bvidl"),i(L,"type","color"),i(L,"id","bg_color_input"),f.__value="bg_color",P(f,f.__value),f.selected=!0,k.__value="secondary_bg_color",P(k,k.__value),h.__value="custom",P(h,h.__value),i(h,"id","bg_color_val"),i(B,"id","bg_color_sel"),i(x,"class","sect_row svelte-9bvidl"),i(a,"id","top_sect"),i(a,"class","second svelte-9bvidl"),i(H,"class","svelte-9bvidl"),i(N,"class","viewport-border svelte-9bvidl"),i(U,"class","viewport-stable_border svelte-9bvidl"),i(l,"class","container")},m(O,_){we(O,l,_),n(l,a),n(a,c),n(a,e),n(a,t),n(a,p),n(a,u),n(a,F),n(a,E),n(a,R),n(a,W),n(a,Q),n(a,I),n(a,z),n(a,D),n(a,J),n(a,S),n(a,K),n(a,M),n(M,$),n(M,q),n(q,g),n(q,w),n(a,G),n(a,x),n(x,X),n(x,L),n(x,Y),n(x,B),n(B,f),n(B,k),n(B,h),n(l,Z),n(l,H),n(l,ee),n(l,N),n(l,te),n(l,U)},p:ae,i:ae,o:ae,d(O){O&&y(l)}}}function ke(A){if(window.Blob)try{return new Blob([A]).size}catch{}let l=A.length;for(let a=A.length-1;a>=0;a--){const c=A.charCodeAt(a);c>127&&c<=2047?l++:c>2047&&c<=65535&&(l+=2),c>=56320&&c<=57343&&a--}return l}function fe(A,l){const a=Math.pow(10,l||0);return Math.round(A*a)/a}function he(){document.querySelector(".viewport-border").setAttribute("text",window.innerWidth+" x "+fe(Telegram.WebApp.viewportHeight,2)),document.querySelector(".viewport-stable_border").setAttribute("text",window.innerWidth+" x "+fe(Telegram.WebApp.viewportStableHeight,2)+" | is_expanded: "+(Telegram.WebApp.isExpanded?"true":"false"))}function Ce(A){const l={initData:Telegram.WebApp.initData||"",initDataUnsafe:Telegram.WebApp.initDataUnsafe||{},MainButton:Telegram.WebApp.MainButton,init(e){document.body.style.visibility="",Telegram.WebApp.ready(),Telegram.WebApp.MainButton.setParams({text:"CLOSE WEBVIEW",is_visible:!0}).onClick(l.close)},expand(){Telegram.WebApp.expand()},close(){Telegram.WebApp.close()},toggleMainButton(e){const t=Telegram.WebApp.MainButton;t.isVisible?(t.hide(),e.innerHTML="Show Main Button"):(t.show(),e.innerHTML="Hide Main Button")},sendMessage(e,t){if(!l.initDataUnsafe.query_id){alert("WebViewQueryId not defined");return}document.querySelectorAll("button").forEach(p=>p.disabled=!0);const s=document.querySelector("#btn_status");s.textContent="Sending...",l.apiRequest("sendMessage",{msg_id:e||"",with_webview:!l.initDataUnsafe.receiver&&t?1:0},function(p){document.querySelectorAll("button").forEach(u=>u.disabled=!1),p.response?p.response.ok?(s.textContent="Message sent successfully!",s.className="ok",s.style.display="block"):(s.textContent=p.response.description,s.className="err",s.style.display="block",alert(p.response.description)):p.error?(s.textContent=p.error,s.className="err",s.style.display="block",alert(p.error)):(s.textContent="Unknown error",s.className="err",s.style.display="block",alert("Unknown error"))})},changeMenuButton(e){document.querySelectorAll("button").forEach(s=>s.disabled=!0);const t=document.querySelector("#btn_status");t.textContent="Changing button...",l.apiRequest("changeMenuButton",{},function(s){document.querySelectorAll("button").forEach(p=>p.disabled=!1),s.response?s.response.ok?(t.textContent="Button changed!",t.className="ok",t.style.display="block",Telegram.WebApp.close()):(t.textContent=s.response.description,t.className="err",t.style.display="block",alert(s.response.description)):s.error?(t.textContent=s.error,t.className="err",t.style.display="block",alert(s.error)):(t.textContent="Unknown error",t.className="err",t.style.display="block",alert("Unknown error"))}),e&&setTimeout(function(){Telegram.WebApp.close()},50)},checkInitData(){const e=document.querySelector("#webview_data_status");l.initDataUnsafe.query_id&&l.initData&&e.classList.contains("status_need")&&(e.classList.remove("status_need"),l.apiRequest("checkInitData",{},function(t){t.ok?(e.textContent="Hash is correct (async)",e.className="ok"):(e.textContent=t.error+" (async)",e.className="err")}))},sendText(e){const t=document.querySelector("#text_field"),s=t.value;if(!s.length)return t.focus();if(ke(s)>4096)return alert("Text is too long");const p=e?10:1;for(let u=0;u<p;u++)Telegram.WebApp.sendData(s)},sendTime(e){const t=e?10:1;for(let s=0;s<t;s++)Telegram.WebApp.sendData(new Date().toString())},showAlert(e){Telegram.WebApp.showAlert(e)},showConfirm(e){Telegram.WebApp.showConfirm(e)},requestWriteAccess(){Telegram.WebApp.requestWriteAccess(function(e){e?l.showAlert("Write access granted"):l.showAlert("Write access denied")})},requestContact(){Telegram.WebApp.requestContact(function(e){e?l.showAlert("Contact granted"):l.showAlert("Contact denied")})},isVersionAtLeast(e){return Telegram.WebApp.isVersionAtLeast(e)},doesntSupport(e){if(!this.isVersionAtLeast(e))throw Telegram.WebApp.showAlert("This feature is not supported in this version of Telegram",function(){Telegram.WebApp.close()}),new Error("This feature is not supported in this version of Telegram")},showPopup(){Telegram.WebApp.showPopup({title:"Popup title",message:"Popup message",buttons:[{id:"delete",type:"destructive",text:"Delete all"},{id:"faq",type:"default",text:"Open FAQ"},{type:"cancel"}]},function(e){e==="delete"?l.showAlert("'Delete all' selected"):e==="faq"&&Telegram.WebApp.openLink("https://telegram.org/faq")})},showScanQrPopup(e){Telegram.WebApp.showScanQrPopup({text:e?"with any link":"for test purposes"},function(t){if(e){const s=t.toString().toLowerCase();if(s.substring(0,7)==="http://"||s.substring(0,8)==="https://")return setTimeout(function(){Telegram.WebApp.openLink(t)},50),!0}else return l.showAlert(t),!0})},requestLocation(e){return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.nextElementSibling.innerHTML="("+t.coords.latitude+", "+t.coords.longitude+")",e.nextElementSibling.className="ok"}):(e.nextElementSibling.innerHTML="Geolocation is not supported in this browser.",e.nextElementSibling.className="err"),!1},requestVideo(e){return navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(t){e.nextElementSibling.innerHTML="(Access granted)"}):(e.nextElementSibling.innerHTML="Media devices is not supported in this browser.",e.nextElementSibling.className="err"),!1},requestAudio(e){return navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(t){e.nextElementSibling.innerHTML="(Access granted)",e.nextElementSibling.className="ok"}):(e.nextElementSibling.innerHTML="Media devices is not supported in this browser.",e.nextElementSibling.className="err"),!1},requestAudioVideo(e){return navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(t){e.nextElementSibling.innerHTML="(Access granted)",e.nextElementSibling.className="ok"}):(e.nextElementSibling.innerHTML="Media devices is not supported in this browser.",e.nextElementSibling.className="err"),!1},testClipboard(e){return Telegram.WebApp.readTextFromClipboard(function(t){t===null?(e.nextElementSibling.innerHTML="Clipboard text unavailable.",e.nextElementSibling.className="err"):(e.nextElementSibling.innerHTML="(Read from clipboard: Â«"+t+"Â»)",e.nextElementSibling.className="ok")}),!1},apiRequest(e,t,s){return s&&s({error:"This function ("+e+") should send requests to your backend. Please, change this code to your own."})}};Telegram.WebApp.onEvent("themeChanged",function(){document.getElementById("theme_data").innerHTML=JSON.stringify(Telegram.WebApp.themeParams,null,2)}),l.initDataUnsafe.query_id&&(document.getElementById("main_btn").style.display="block"),document.getElementById("with_webview_btn").style.display=l.initDataUnsafe.query_id&&!l.initDataUnsafe.receiver?"block":"none",document.getElementById("webview_data").innerHTML=JSON.stringify(l.initDataUnsafe,null,2),document.getElementById("theme_data").innerHTML=JSON.stringify(Telegram.WebApp.themeParams,null,2),document.getElementById("regular_link").setAttribute("href",document.getElementById("regular_link").getAttribute("href")+location.hash),document.getElementById("text_field").focus(),document.getElementById("regular_field").addEventListener("input",function(e){this.value.toLowerCase().indexOf("progress")>=0?Telegram.WebApp.MainButton.showProgress():Telegram.WebApp.MainButton.hideProgress()}),document.getElementById("ver").innerHTML=Telegram.WebApp.version,document.getElementById("platform").innerHTML=Telegram.WebApp.platform,l.initDataUnsafe.receiver?(document.getElementById("peer_wrap").style.display="block",document.getElementById("peer_name").innerHTML=l.initDataUnsafe.receiver.first_name+" "+l.initDataUnsafe.receiver.last_name,l.initDataUnsafe.receiver.photo_url?document.getElementById("peer_photo").setAttribute("src",l.initDataUnsafe.receiver.photo_url):document.getElementById("peer_photo").style.display="none"):l.initDataUnsafe.chat&&(document.getElementById("peer_wrap").style.display="block",document.getElementById("peer_name").innerHTML=l.initDataUnsafe.chat.title,l.initDataUnsafe.chat.photo_url?document.getElementById("peer_photo").setAttribute("src",l.initDataUnsafe.chat.photo_url):document.getElementById("peer_photo").style.display="none"),l.checkInitData(),l.init(),Telegram.WebApp.setHeaderColor("secondary_bg_color"),Telegram.WebApp.onEvent("viewportChanged",he),he(),Telegram.WebApp.onEvent("settingsButtonClicked",function(){alert("Settings opened!")});let a=document.getElementById("bg_color_sel").value;const c=document.getElementById("bg_color_input"),T=document.getElementById("header_color_sel");return c.value=Telegram.WebApp.backgroundColor,document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor),T.value="secondary_bg_color",T.addEventListener("change",function(e){const t=e.target.value;document.getElementById("top_sect").classList.toggle("second",t==="secondary_bg_color"),Telegram.WebApp.setHeaderColor(t),document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor)}),c.addEventListener("change",function(e){const t=e.target.value;document.getElementById("bg_color_val").textContent=t,T.value="custom",a=document.getElementById("bg_color_sel").value,Telegram.WebApp.setBackgroundColor(t),document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor)}),T.addEventListener("change",function(e){const t=e.target.value;t==="custom"?(T.value=a,c.focus()):(document.getElementById("bg_color_val").textContent="custom...",Telegram.WebApp.setBackgroundColor(t),document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor),c.value=Telegram.WebApp.backgroundColor,a=T.value)}),Telegram.WebApp.onEvent("themeChanged",function(){c.value=Telegram.WebApp.backgroundColor,document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor)}),l.testClipboard(document.getElementById("clipboard_test")),[]}class De extends ye{constructor(l){super(),Ae(this,l,Ce,xe,_e,{})}}export{De as component};
