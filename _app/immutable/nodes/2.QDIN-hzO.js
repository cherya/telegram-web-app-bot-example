import{s as he,n as re,o as ve}from"../chunks/scheduler.k-kUyWhY.js";import{S as _e,i as ye,g as l,s as u,m as be,h as c,j as E,y as b,c as m,f as T,n as fe,k as r,l as Ae,z as R,a as Te,x as a}from"../chunks/index.m1ONKgFu.js";function we(se){let d,s,w,z="Send «Hello, World!»",o,f,U="Send «Hello, World!» with inline webview button",H,g,W="Send current time to bot (x10)",h,e,t="Expand Webview",n,i,I="Hide Main Button",Q,L,J,D,K,S,le='<img id="peer_photo" class="chat_img" src=""/> <span id="peer_name"></span>',G,M,X,q,v,ce="bg_color",x,pe="secondary_bg_color",Y,k,Z,O,ee,B,_,de="bg_color",C,ue="secondary_bg_color",y,me="custom...",te,N,ge=`<div id="btn_status" class="hint" style="display: none;"></div> <p>Test links:</p> <ul><li><a id="regular_link" href="">Regular link #2</a> (opens inside webview)</li> <li><a href="https://telegram.org/" target="_blank">target=&quot;_blank&quot; link</a>
        (opens outside webview)</li> <li><a href="javascript:window.open(&#39;https://telegram.org/&#39;);">window.open() link</a> (opens outside webview)</li> <li><a href="https://t.me/like">LikeBot t.me link</a> (opens inside Telegram
        app)</li> <li><a href="javascript:Telegram.WebApp.openTelegramLink(&#39;https://t.me/vote&#39;);">web_app_open_tg_link()</a> (opens inside Telegram app)</li> <li><a href="javascript:Telegram.WebApp.openLink(&#39;https://google.com/&#39;);">web_app_open_link()</a> (opens outside webview)</li> <li><a href="tg://resolve?domain=vote">VoteBot tg:// link</a> (does not open)</li></ul> <p>Test permissions:</p> <ul><li><a href="javascript:;" onclick="return DemoApp.requestLocation(this);">Request Location</a> <span></span></li> <li><a href="javascript:;" onclick="return DemoApp.requestVideo(this);">Request Video</a> <span></span></li> <li><a href="javascript:;" onclick="return DemoApp.requestAudio(this);">Request Audio</a> <span></span></li> <li><a href="javascript:;" onclick="return DemoApp.requestAudioVideo(this);">Request Audio+Video</a> <span></span></li> <li><a href="javascript:;" onclick="return DemoApp.testClipboard(this);" id="clipboard_test">Read from clipboard</a> <span></span></li></ul> <p>Test alerts:</p> <div class="columns"><ul><li><a href="javascript:;" onclick="alert(&#39;Hello!&#39;);">alert</a></li> <li><a href="javascript:;" onclick="confirm(&#39;Are you sure?&#39;);">confirm</a></li> <li><a href="javascript:;" onclick="prompt(&#39;How old are you?&#39;);">prompt</a></li></ul> <ul><li><a href="javascript:;" onclick="DemoApp.showAlert(&#39;Hello!&#39;);">showAlert</a></li> <li><a href="javascript:;" onclick="DemoApp.showConfirm(&#39;Are you sure?&#39;);">showConfirm</a></li> <li><a href="javascript:;" onclick="DemoApp.requestWriteAccess();">requestWriteAccess</a></li> <li><a href="javascript:;" onclick="DemoApp.requestContact();">requestContact</a></li> <li><a href="javascript:;" onclick="DemoApp.showPopup();">showPopup</a></li> <li><a href="javascript:;" onclick="DemoApp.showScanQrPopup();">showScanQrPopup</a></li> <li><a href="javascript:;" onclick="DemoApp.showScanQrPopup(true);">showScanQrPopup (links only)</a></li></ul></div> <p>Haptics:</p> <ul><li>Impact: <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;heavy&#39;);">heavy</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;light&#39;);">light</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;medium&#39;);">medium</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;rigid&#39;);">rigid</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.impactOccurred(&#39;soft&#39;);">soft</a><br/><br/></li> <li>Notification: <a href="javascript:Telegram.WebApp.HapticFeedback.notificationOccurred(&#39;error&#39;);">error</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.notificationOccurred(&#39;success&#39;);">success</a>,  
        <a href="javascript:Telegram.WebApp.HapticFeedback.notificationOccurred(&#39;warning&#39;);">warning</a><br/><br/></li> <li>Selection: <a href="javascript:Telegram.WebApp.HapticFeedback.selectionChanged();">changed</a><br/><br/></li></ul> <pre><code id="webview_data"></code></pre> <div class="hint">Data passed to webview.
      <span id="webview_data_status" class="status_need">Checking hash...</span></div> <pre><code id="theme_data"></code></pre> <div class="hint">Theme params</div> <div class="hint">Version: <span id="ver"></span>, platform: <span id="platform"></span></div>`,ne,j,ae,P;return{c(){d=l("div"),s=l("section"),w=l("button"),w.textContent=z,o=u(),f=l("button"),f.textContent=U,H=u(),g=l("button"),g.textContent=W,h=u(),e=l("button"),e.textContent=t,n=u(),i=l("button"),i.textContent=I,Q=u(),L=l("input"),J=u(),D=l("div"),K=u(),S=l("div"),S.innerHTML=le,G=u(),M=l("div"),X=be("Header: "),q=l("select"),v=l("option"),v.textContent=ce,x=l("option"),x.textContent=pe,Y=u(),k=l("div"),Z=be("Background: "),O=l("input"),ee=u(),B=l("select"),_=l("option"),_.textContent=de,C=l("option"),C.textContent=ue,y=l("option"),y.textContent=me,te=u(),N=l("section"),N.innerHTML=ge,ne=u(),j=l("div"),ae=u(),P=l("div"),this.h()},l(V){d=c(V,"DIV",{class:!0});var A=E(d);s=c(A,"SECTION",{id:!0,class:!0});var p=E(s);w=c(p,"BUTTON",{id:!0,onclick:!0,"data-svelte-h":!0}),b(w)!=="svelte-1lcrk0"&&(w.textContent=z),o=m(p),f=c(p,"BUTTON",{id:!0,onclick:!0,"data-svelte-h":!0}),b(f)!=="svelte-zutttf"&&(f.textContent=U),H=m(p),g=c(p,"BUTTON",{id:!0,onclick:!0,"data-svelte-h":!0}),b(g)!=="svelte-125ccpw"&&(g.textContent=W),h=m(p),e=c(p,"BUTTON",{onclick:!0,"data-svelte-h":!0}),b(e)!=="svelte-1qkzyz3"&&(e.textContent=t),n=m(p),i=c(p,"BUTTON",{onclick:!0,"data-svelte-h":!0}),b(i)!=="svelte-1qs826o"&&(i.textContent=I),Q=m(p),L=c(p,"INPUT",{type:!0,placeholder:!0,id:!0}),J=m(p),D=c(p,"DIV",{class:!0,contenteditable:!0,"data-placeholder":!0,id:!0}),E(D).forEach(T),K=m(p),S=c(p,"DIV",{id:!0,style:!0,"data-svelte-h":!0}),b(S)!=="svelte-er9q7j"&&(S.innerHTML=le),G=m(p),M=c(p,"DIV",{class:!0});var oe=E(M);X=fe(oe,"Header: "),q=c(oe,"SELECT",{id:!0});var ie=E(q);v=c(ie,"OPTION",{"data-svelte-h":!0}),b(v)!=="svelte-12yzkyt"&&(v.textContent=ce),x=c(ie,"OPTION",{"data-svelte-h":!0}),b(x)!=="svelte-1x10bni"&&(x.textContent=pe),ie.forEach(T),oe.forEach(T),Y=m(p),k=c(p,"DIV",{class:!0});var F=E(k);Z=fe(F,"Background: "),O=c(F,"INPUT",{type:!0,id:!0}),ee=m(F),B=c(F,"SELECT",{id:!0});var $=E(B);_=c($,"OPTION",{"data-svelte-h":!0}),b(_)!=="svelte-12yzkyt"&&(_.textContent=de),C=c($,"OPTION",{"data-svelte-h":!0}),b(C)!=="svelte-1x10bni"&&(C.textContent=ue),y=c($,"OPTION",{id:!0,"data-svelte-h":!0}),b(y)!=="svelte-z7gcmv"&&(y.textContent=me),$.forEach(T),F.forEach(T),p.forEach(T),te=m(A),N=c(A,"SECTION",{"data-svelte-h":!0}),b(N)!=="svelte-1217p0s"&&(N.innerHTML=ge),ne=m(A),j=c(A,"DIV",{class:!0}),E(j).forEach(T),ae=m(A),P=c(A,"DIV",{class:!0}),E(P).forEach(T),A.forEach(T),this.h()},h(){r(w,"id","main_btn"),r(w,"onclick","DemoApp.sendMessage('');"),r(f,"id","with_webview_btn"),r(f,"onclick","DemoApp.sendMessage('', true);"),r(g,"id","data_btn"),r(g,"onclick","DemoApp.sendTime(true);"),r(e,"onclick","DemoApp.expand();"),r(i,"onclick","DemoApp.toggleMainButton(this);"),r(L,"type","text"),r(L,"placeholder","Input text in regular input..."),r(L,"id","regular_field"),r(D,"class","input"),r(D,"contenteditable","true"),r(D,"data-placeholder","Input text in contenteditable field..."),r(D,"id","text_field"),r(S,"id","peer_wrap"),Ae(S,"display","none"),v.__value="bg_color",R(v,v.__value),v.selected=!0,x.__value="secondary_bg_color",R(x,x.__value),r(q,"id","header_color_sel"),r(M,"class","sect_row"),r(O,"type","color"),r(O,"id","bg_color_input"),_.__value="bg_color",R(_,_.__value),_.selected=!0,C.__value="secondary_bg_color",R(C,C.__value),y.__value="custom",R(y,y.__value),r(y,"id","bg_color_val"),r(B,"id","bg_color_sel"),r(k,"class","sect_row"),r(s,"id","top_sect"),r(s,"class","second"),r(j,"class","viewport-border"),r(P,"class","viewport-stable_border"),r(d,"class","container")},m(V,A){Te(V,d,A),a(d,s),a(s,w),a(s,o),a(s,f),a(s,H),a(s,g),a(s,h),a(s,e),a(s,n),a(s,i),a(s,Q),a(s,L),a(s,J),a(s,D),a(s,K),a(s,S),a(s,G),a(s,M),a(M,X),a(M,q),a(q,v),a(q,x),a(s,Y),a(s,k),a(k,Z),a(k,O),a(k,ee),a(k,B),a(B,_),a(B,C),a(B,y),a(d,te),a(d,N),a(d,ne),a(d,j),a(d,ae),a(d,P)},p:re,i:re,o:re,d(V){V&&T(d)}}}function xe(se,d,s){return ve(()=>{const o={initData:Telegram.WebApp.initData||"",initDataUnsafe:Telegram.WebApp.initDataUnsafe||{},MainButton:Telegram.WebApp.MainButton,init(e){document.body.style.visibility="",Telegram.WebApp.ready(),Telegram.WebApp.MainButton.setParams({text:"CLOSE WEBVIEW",is_visible:!0}).onClick(o.close)},expand(){Telegram.WebApp.expand()},close(){Telegram.WebApp.close()},toggleMainButton(e){const t=Telegram.WebApp.MainButton;t.isVisible?(t.hide(),e.innerHTML="Show Main Button"):(t.show(),e.innerHTML="Hide Main Button")},sendMessage(e,t){if(!o.initDataUnsafe.query_id){alert("WebViewQueryId not defined");return}document.querySelectorAll("button").forEach(i=>i.disabled=!0);const n=document.querySelector("#btn_status");n.textContent="Sending...",o.apiRequest("sendMessage",{msg_id:e||"",with_webview:!o.initDataUnsafe.receiver&&t?1:0},function(i){document.querySelectorAll("button").forEach(I=>I.disabled=!1),i.response?i.response.ok?(n.textContent="Message sent successfully!",n.className="ok",n.style.display="block"):(n.textContent=i.response.description,n.className="err",n.style.display="block",alert(i.response.description)):i.error?(n.textContent=i.error,n.className="err",n.style.display="block",alert(i.error)):(n.textContent="Unknown error",n.className="err",n.style.display="block",alert("Unknown error"))})},changeMenuButton(e){document.querySelectorAll("button").forEach(n=>n.disabled=!0);const t=document.querySelector("#btn_status");t.textContent="Changing button...",o.apiRequest("changeMenuButton",{},function(n){document.querySelectorAll("button").forEach(i=>i.disabled=!1),n.response?n.response.ok?(t.textContent="Button changed!",t.className="ok",t.style.display="block",Telegram.WebApp.close()):(t.textContent=n.response.description,t.className="err",t.style.display="block",alert(n.response.description)):n.error?(t.textContent=n.error,t.className="err",t.style.display="block",alert(n.error)):(t.textContent="Unknown error",t.className="err",t.style.display="block",alert("Unknown error"))}),e&&setTimeout(function(){Telegram.WebApp.close()},50)},checkInitData(){const e=document.querySelector("#webview_data_status");o.initDataUnsafe.query_id&&o.initData&&e.classList.contains("status_need")&&(e.classList.remove("status_need"),o.apiRequest("checkInitData",{},function(t){t.ok?(e.textContent="Hash is correct (async)",e.className="ok"):(e.textContent=t.error+" (async)",e.className="err")}))},sendText(e){const t=document.querySelector("#text_field"),n=t.value;if(!n.length)return t.focus();if(f(n)>4096)return alert("Text is too long");const i=e?10:1;for(let I=0;I<i;I++)Telegram.WebApp.sendData(n)},sendTime(e){const t=e?10:1;for(let n=0;n<t;n++)Telegram.WebApp.sendData(new Date().toString())},showAlert(e){Telegram.WebApp.showAlert(e)},showConfirm(e){Telegram.WebApp.showConfirm(e)},requestWriteAccess(){Telegram.WebApp.requestWriteAccess(function(e){e?o.showAlert("Write access granted"):o.showAlert("Write access denied")})},requestContact(){Telegram.WebApp.requestContact(function(e){e?o.showAlert("Contact granted"):o.showAlert("Contact denied")})},isVersionAtLeast(e){return Telegram.WebApp.isVersionAtLeast(e)},doesntSupport(e){if(!this.isVersionAtLeast(e))throw Telegram.WebApp.showAlert("This feature is not supported in this version of Telegram",function(){Telegram.WebApp.close()}),new Error("This feature is not supported in this version of Telegram")},showPopup(){Telegram.WebApp.showPopup({title:"Popup title",message:"Popup message",buttons:[{id:"delete",type:"destructive",text:"Delete all"},{id:"faq",type:"default",text:"Open FAQ"},{type:"cancel"}]},function(e){e==="delete"?o.showAlert("'Delete all' selected"):e==="faq"&&Telegram.WebApp.openLink("https://telegram.org/faq")})},showScanQrPopup(e){Telegram.WebApp.showScanQrPopup({text:e?"with any link":"for test purposes"},function(t){if(e){const n=t.toString().toLowerCase();if(n.substring(0,7)==="http://"||n.substring(0,8)==="https://")return setTimeout(function(){Telegram.WebApp.openLink(t)},50),!0}else return o.showAlert(t),!0})},requestLocation(e){return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.nextElementSibling.innerHTML="("+t.coords.latitude+", "+t.coords.longitude+")",e.nextElementSibling.className="ok"}):(e.nextElementSibling.innerHTML="Geolocation is not supported in this browser.",e.nextElementSibling.className="err"),!1},requestVideo(e){return navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(t){e.nextElementSibling.innerHTML="(Access granted)"}):(e.nextElementSibling.innerHTML="Media devices is not supported in this browser.",e.nextElementSibling.className="err"),!1},requestAudio(e){return navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(t){e.nextElementSibling.innerHTML="(Access granted)",e.nextElementSibling.className="ok"}):(e.nextElementSibling.innerHTML="Media devices is not supported in this browser.",e.nextElementSibling.className="err"),!1},requestAudioVideo(e){return navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(t){e.nextElementSibling.innerHTML="(Access granted)",e.nextElementSibling.className="ok"}):(e.nextElementSibling.innerHTML="Media devices is not supported in this browser.",e.nextElementSibling.className="err"),!1},testClipboard(e){return Telegram.WebApp.readTextFromClipboard(function(t){t===null?(e.nextElementSibling.innerHTML="Clipboard text unavailable.",e.nextElementSibling.className="err"):(e.nextElementSibling.innerHTML="(Read from clipboard: Â«"+t+"Â»)",e.nextElementSibling.className="ok")}),!1},apiRequest(e,t,n){return n&&n({error:"This function ("+e+") should send requests to your backend. Please, change this code to your own."})}};function f(e){if(window.Blob)try{return new Blob([e]).size}catch{}let t=e.length;for(let n=e.length-1;n>=0;n--){const i=e.charCodeAt(n);i>127&&i<=2047?t++:i>2047&&i<=65535&&(t+=2),i>=56320&&i<=57343&&n--}return t}function U(e,t){const n=Math.pow(10,t||0);return Math.round(e*n)/n}Telegram.WebApp.onEvent("themeChanged",function(){document.getElementById("theme_data").innerHTML=JSON.stringify(Telegram.WebApp.themeParams,null,2)}),o.initDataUnsafe.query_id&&(document.getElementById("main_btn").style.display="block"),document.getElementById("with_webview_btn").style.display=o.initDataUnsafe.query_id&&!o.initDataUnsafe.receiver?"block":"none",document.getElementById("webview_data").innerHTML=JSON.stringify(o.initDataUnsafe,null,2),document.getElementById("theme_data").innerHTML=JSON.stringify(Telegram.WebApp.themeParams,null,2),document.getElementById("regular_link").setAttribute("href",document.getElementById("regular_link").getAttribute("href")+location.hash),document.getElementById("text_field").focus(),document.getElementById("regular_field").addEventListener("input",function(e){this.value.toLowerCase().indexOf("progress")>=0?Telegram.WebApp.MainButton.showProgress():Telegram.WebApp.MainButton.hideProgress()}),document.getElementById("ver").innerHTML=Telegram.WebApp.version,document.getElementById("platform").innerHTML=Telegram.WebApp.platform,o.initDataUnsafe.receiver?(document.getElementById("peer_wrap").style.display="block",document.getElementById("peer_name").innerHTML=o.initDataUnsafe.receiver.first_name+" "+o.initDataUnsafe.receiver.last_name,o.initDataUnsafe.receiver.photo_url?document.getElementById("peer_photo").setAttribute("src",o.initDataUnsafe.receiver.photo_url):document.getElementById("peer_photo").style.display="none"):o.initDataUnsafe.chat&&(document.getElementById("peer_wrap").style.display="block",document.getElementById("peer_name").innerHTML=o.initDataUnsafe.chat.title,o.initDataUnsafe.chat.photo_url?document.getElementById("peer_photo").setAttribute("src",o.initDataUnsafe.chat.photo_url):document.getElementById("peer_photo").style.display="none"),o.checkInitData(),o.init();function H(){document.querySelector(".viewport-border").setAttribute("text",window.innerWidth+" x "+U(Telegram.WebApp.viewportHeight,2)),document.querySelector(".viewport-stable_border").setAttribute("text",window.innerWidth+" x "+U(Telegram.WebApp.viewportStableHeight,2)+" | is_expanded: "+(Telegram.WebApp.isExpanded?"true":"false"))}Telegram.WebApp.setHeaderColor("secondary_bg_color"),Telegram.WebApp.onEvent("viewportChanged",H),H(),Telegram.WebApp.onEvent("settingsButtonClicked",function(){alert("Settings opened!")});let g=document.getElementById("bg_color_sel").value;const W=document.getElementById("bg_color_input"),h=document.getElementById("header_color_sel");W.value=Telegram.WebApp.backgroundColor,document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor),h.value="secondary_bg_color",h.addEventListener("change",function(e){const t=e.target.value;document.getElementById("top_sect").classList.toggle("second",t==="secondary_bg_color"),Telegram.WebApp.setHeaderColor(t),document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor)}),W.addEventListener("change",function(e){const t=e.target.value;document.getElementById("bg_color_val").textContent=t,h.value="custom",g=document.getElementById("bg_color_sel").value,Telegram.WebApp.setBackgroundColor(t),document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor)}),h.addEventListener("change",function(e){const t=e.target.value;t==="custom"?(h.value=g,W.focus()):(document.getElementById("bg_color_val").textContent="custom...",Telegram.WebApp.setBackgroundColor(t),document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor),W.value=Telegram.WebApp.backgroundColor,g=h.value)}),Telegram.WebApp.onEvent("themeChanged",function(){W.value=Telegram.WebApp.backgroundColor,document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor)}),o.testClipboard(document.getElementById("clipboard_test"))}),[!0,!0]}class Ee extends _e{constructor(d){super(),ye(this,d,xe,we,he,{prerender:0,ssr:1})}get prerender(){return this.$$.ctx[0]}get ssr(){return this.$$.ctx[1]}}export{Ee as component};
